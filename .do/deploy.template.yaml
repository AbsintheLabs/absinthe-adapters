spec:
  name: absinthe-adapters
  services:
    - name: uniswapv2-indexer
      dockerfile_path: ops/dockerfiles/Dockerfile.uniswapv2
      github:
        repo: AbsintheLabs/absinthe-adapters
        branch: test
        deploy_on_push: true
      envs:
        - key: DB_USER
          value: doadmin
        - key: DB_PASS
          value: ${squid.PASSWORD}
        - key: DB_HOST
          value: ${squid.HOST}
        - key: DB_PORT
          value: ${squid.PORT}
        - key: DB_NAME
          value: ${squid.DATABASE}
        - key: DB_URL
          value: "postgres://$(DB_USER):$(DB_PASS)@$(DB_HOST):$(DB_PORT)/$(DB_NAME)?sslmode=require"

  databases:
    - name: squid
      engine: PG
      version: "17"
