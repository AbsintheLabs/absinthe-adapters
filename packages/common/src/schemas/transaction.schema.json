{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://adapters.absinthe.network/schemas/transaction.schema.json",
    "title": "Transaction",
    "description": "Metric representing the instantaneous impact of a discrete, atomic event (ie. swap, trade, transfer) within a protocol. Captures the momentary change in state at the time of execution, independent of its duration or persistence.",
    "type": "object",
    "properties": {
        "version": {
            "type": "string",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "eventType": {
            "type": "string",
            "enum": [
                "transaction",
                "timeWeightedBalance"
            ]
        },
        "eventId": {
            "type": "string"
        },
        "userId": {
            "type": "string",
            "oneOf": [
                {
                    "pattern": "^0x[a-fA-F0-9]{40}$",
                    "description": "EVM address (42 chars, starts with 0x)"
                },
                {
                    "pattern": "^[1-9A-HJ-NP-Za-km-z]{32,44}$",
                    "description": "Solana address (32-44 base58 chars)"
                }
            ]
        },
        "chainArch": {
            "type": "string",
            "enum": [
                "evm",
                "solana"
            ]
        }
    }
}